import sqlite3 from 'sqlite3';

const db = new sqlite3.Database('database.db');

// –°–æ–∑–¥–∞–µ–º —Ç–∞–±–ª–∏—Ü—ã –ø–æ –æ–¥–Ω–æ–π –¥–ª—è –∏–∑–±–µ–∂–∞–Ω–∏—è –æ—à–∏–±–æ–∫
const tablesSQL = [
  `DROP TABLE IF EXISTS –∑–∞–∫–∞–∑—ã`,
  `DROP TABLE IF EXISTS —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∏`,
  `DROP TABLE IF EXISTS –∫–ª–∏–µ–Ω—Ç—ã`,
  `DROP TABLE IF EXISTS –∫–æ–º–ø—å—é—Ç–µ—Ä`,
  `DROP TABLE IF EXISTS —É—Å–ª—É–≥–∏`,
  `DROP TABLE IF EXISTS —Ç–æ–≤–∞—Ä—ã`,

  `CREATE TABLE –∫–ª–∏–µ–Ω—Ç—ã (
    —Ñ–∏–æ TEXT,
    –∞–¥—Ä–µ—Å_–¥–æ—Å—Ç–∞–≤–∫–∏ TEXT,
    id_–∫–ª–∏–µ–Ω—Ç–∞ INTEGER PRIMARY KEY
  )`,

  `CREATE TABLE —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ (
    —Ñ–∏–æ TEXT,
    –¥–æ–ª–∂–Ω–æ—Å—Ç—å TEXT,
    —Å—Ç–∞–∂_—Ä–∞–±–æ—Ç—ã TEXT,
    –∑–ø INTEGER,
    –ø–∞—Å–ø–æ—Ä—Ç–Ω—ã–µ_–¥–∞–Ω–Ω—ã–µ INTEGER PRIMARY KEY
  )`,

  `CREATE TABLE –∫–æ–º–ø—å—é—Ç–µ—Ä (
    –Ω–æ–º–µ—Ä_–∫–æ–º–ø—å—é—Ç–µ—Ä–∞ INTEGER PRIMARY KEY,
    —Ç–∏–ø_–∫–æ–º–ø—å—é—Ç–µ—Ä–∞ TEXT,
    –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å_fps INTEGER,
    —Ü–µ–Ω–∞ INTEGER,
    –≤–∏–¥–µ–æ–∫–∞—Ä—Ç–∞ TEXT,
    –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä TEXT,
    –º–∞—Ç_–ø–ª–∞—Ç–∞ TEXT,
    –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–∞—è_–ø–∞–º—è—Ç—å TEXT,
    ssd_–Ω–∞–∫–æ–ø–∏—Ç–µ–ª—å TEXT,
    –±–ø TEXT,
    –∫–æ—Ä–ø—É—Å TEXT
  )`,

  `CREATE TABLE —É—Å–ª—É–≥–∏ (
    –Ω–æ–º–µ—Ä_—É—Å–ª—É–≥–∏ INTEGER PRIMARY KEY,
    —Ç–∏–ø_—É—Å–ª—É–≥–∏ TEXT,
    –Ω–∞–∑–≤–∞–Ω–∏–µ_—É—Å–ª—É–≥–∏ TEXT,
    —Å—Ç–æ–∏–º–æ—Å—Ç—å_—É—Å–ª—É–≥–∏ INTEGER
  )`,

  `CREATE TABLE —Ç–æ–≤–∞—Ä—ã (
    –Ω–æ–º–µ—Ä_—Ç–æ–≤–∞—Ä–∞ INTEGER PRIMARY KEY,
    –≤–∏–¥_—Ç–æ–≤–∞—Ä–∞ TEXT,
    –Ω–∞–∑–≤–∞–Ω–∏–µ_—Ç–æ–≤–∞—Ä–∞ TEXT,
    —Å—Ç–æ–∏–º–æ—Å—Ç—å_—Ç–æ–≤–∞—Ä–∞ INTEGER
  )`,

  `CREATE TABLE –∑–∞–∫–∞–∑—ã (
    –Ω–æ–º–µ—Ä_–∑–∞–∫–∞–∑–∞ INTEGER PRIMARY KEY,
    id_–∫–ª–∏–µ–Ω—Ç–∞ INTEGER,
    –≤–∏–¥_–∑–∞–∫–∞–∑–∞ TEXT,
    –Ω–æ–º–µ—Ä_–∫–æ–º–ø—å—é—Ç–µ—Ä–∞ INTEGER,
    –Ω–æ–º–µ—Ä_—É—Å–ª—É–≥–∏ INTEGER,
    –Ω–æ–º–µ—Ä_—Ç–æ–≤–∞—Ä–∞ INTEGER,
    —Å—Ç–æ–∏–º–æ—Å—Ç—å_–∑–∞–∫–∞–∑–∞ INTEGER,
    —Ç–∏–ø_–æ–ø–ª–∞—Ç—ã TEXT,
    –¥–∞—Ç–∞_–∑–∞–∫–∞–∑–∞ TEXT,
    FOREIGN KEY (id_–∫–ª–∏–µ–Ω—Ç–∞) REFERENCES –∫–ª–∏–µ–Ω—Ç—ã(id_–∫–ª–∏–µ–Ω—Ç–∞),
    FOREIGN KEY (–Ω–æ–º–µ—Ä_–∫–æ–º–ø—å—é—Ç–µ—Ä–∞) REFERENCES –∫–æ–º–ø—å—é—Ç–µ—Ä(–Ω–æ–º–µ—Ä_–∫–æ–º–ø—å—é—Ç–µ—Ä–∞),
    FOREIGN KEY (–Ω–æ–º–µ—Ä_—É—Å–ª—É–≥–∏) REFERENCES —É—Å–ª—É–≥–∏(–Ω–æ–º–µ—Ä_—É—Å–ª—É–≥–∏),
    FOREIGN KEY (–Ω–æ–º–µ—Ä_—Ç–æ–≤–∞—Ä–∞) REFERENCES —Ç–æ–≤–∞—Ä—ã(–Ω–æ–º–µ—Ä_—Ç–æ–≤–∞—Ä–∞)
  )`
];

// –î–∞–Ω–Ω—ã–µ –¥–ª—è –≤—Å—Ç–∞–≤–∫–∏
const insertSQL = [
  // –ö–ª–∏–µ–Ω—Ç—ã
  `INSERT INTO –∫–ª–∏–µ–Ω—Ç—ã (—Ñ–∏–æ, –∞–¥—Ä–µ—Å_–¥–æ—Å—Ç–∞–≤–∫–∏, id_–∫–ª–∏–µ–Ω—Ç–∞) VALUES 
  ('–£–≥–≤–µ–π –ß. –ö.', '–†–∞–π', 105),
  ('–û–≤–µ—á–∫–∏–Ω –ê. –í.', '–ú–æ—Å–∫–≤–∞, –ü—É—à–∫–∏–Ω–∞, –¥. –ö–æ–ª–æ—Ç—É—à–∫–∏–Ω–∞', 101),
  ('–ü—É—Ç–∏–Ω –í. –í.', '–ú–æ—Å–∫–≤–∞, –ö—Ä–µ–º–ª—å', 103),
  ('–†–æ–Ω–∞–ª–¥–æ –ö.', '–§—É—Ç–±–æ–ª—å–Ω–æ–µ –ø–æ–ª–µ #1', 102),
  ('–¢—Ä–∞–º–ø –î.', '–í–∞—à–∏–Ω–≥—Ç–æ–Ω, –ë–µ–ª—ã–π –¥–æ–º', 104)`,

  // –°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏
  `INSERT INTO —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ (—Ñ–∏–æ, –¥–æ–ª–∂–Ω–æ—Å—Ç—å, —Å—Ç–∞–∂_—Ä–∞–±–æ—Ç—ã, –∑–ø, –ø–∞—Å–ø–æ—Ä—Ç–Ω—ã–µ_–¥–∞–Ω–Ω—ã–µ) VALUES 
  ('–¢–∏–º–æ—Ñ–µ–µ–≤ –ê.–í.', '–∫–∞—Å—Å–∏—Ä', '3.5 –≥–æ–¥–∞', 45600, 4545221133),
  ('–£—Å–∞—á–µ–≤ –í. –§.', '—Å–±–æ—Ä—â–∏–∫ –ü–ö', '6 –ª–µ—Ç', 52000, 5252112233),
  ('–ö–Ω—è–∑–µ–≤ –ú. –ò.', '—É–±–æ—Ä—â–∏–∫', '12 –ª–µ—Ç', 23500, 2323331122),
  ('–ö–∞—Ä–∞—Å–µ–≤ –†. –†.', '–ø–æ–º–æ—â–Ω–∏–∫ —Å–∏—Å-–∞–¥–º–∏–Ω–∞', '3 –º–µ—Å', 38760, 3838223311),
  ('–®–∏—Ñ—É –ú.', '—Å–∏—Å-–∞–¥–º–∏–Ω', '2 –≥–æ–¥–∞', 89050, 8989113322)`,

  // –ö–æ–º–ø—å—é—Ç–µ—Ä—ã
  `INSERT INTO –∫–æ–º–ø—å—é—Ç–µ—Ä (–Ω–æ–º–µ—Ä_–∫–æ–º–ø—å—é—Ç–µ—Ä–∞, —Ç–∏–ø_–∫–æ–º–ø—å—é—Ç–µ—Ä–∞, –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å_fps, —Ü–µ–Ω–∞, –≤–∏–¥–µ–æ–∫–∞—Ä—Ç–∞, –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä, –º–∞—Ç_–ø–ª–∞—Ç–∞, –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–∞—è_–ø–∞–º—è—Ç—å, ssd_–Ω–∞–∫–æ–ø–∏—Ç–µ–ª—å, –±–ø, –∫–æ—Ä–ø—É—Å) VALUES 
  (57900, 'Custom', 128, 142400, 'GeForce RTX 5060', 'Intel Core i5-14200f', 'ASRock Z770', '32GB G.SKILL', '2TB', '800W', 'HYPERPC XR1'),
  (51090, 'Custom', 250, 528000, 'GeForce RTX 5080', 'Ryzen 9 9910X', 'CROSSHAIR X870E', '64GB G.SKILL', '4TB', '1000W', 'HYPERPC Z 02'),
  (51580, 'DESK', 268, 1539100, 'GeForce RTX 5090', 'Ryzen 9 9950X3D', 'CROSSHAIR X870E', '96GB G.SKILL', '4TB + 1TB', '1300W', 'HYPERPC DESK 2.0'),
  (56220, 'Custom', 168, 264000, 'GeForce RTX 5060 TI', 'Ryzen 6 7060', 'ROG 7', '64GB G.SKILL', '2TB + 1TB', '900W', 'HYPERPC XR3'),
  (55664, 'Custom', 210, 319900, 'GeForce RTX 5070S', 'Ryzen 7 7400x', 'ROG 9', '64GB G.SKILL', '2TB + 2TB', '1000W', 'HYPERPC Z 01')`,

  // –£—Å–ª—É–≥–∏
  `INSERT INTO —É—Å–ª—É–≥–∏ (–Ω–æ–º–µ—Ä_—É—Å–ª—É–≥–∏, —Ç–∏–ø_—É—Å–ª—É–≥–∏, –Ω–∞–∑–≤–∞–Ω–∏–µ_—É—Å–ª—É–≥–∏, —Å—Ç–æ–∏–º–æ—Å—Ç—å_—É—Å–ª—É–≥–∏) VALUES 
  (3018, '–ú–æ–¥–¥–∏–Ω–≥ –∏ –∫–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è', '–°–±–æ—Ä–∫–∞ –∏ –¥–æ—Å—Ç–∞–≤–∫–∞ –ü–ö (—Å —É—Å—Ç–∞–Ω–æ–≤–∫–æ–π windows)', 38900),
  (3125, '–¢–µ—Ö. –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ', 'HYPERPC SERVICE PLUS', 11500),
  (3016, '–ê–ø–≥—Ä–µ–π–¥ —Ü–µ–Ω—Ç—Ä', '–£–ª—É—á—à–µ–Ω–∏–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫ –ü–ö (XH3000-ultra)', 670900),
  (3218, '–ú–æ–¥–¥–∏–Ω–≥ –∏ –∫–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è', '–ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è –∫–æ—Ä–ø—É—Å–∞ –ø–æ–¥ CS2', 28900),
  (3128, '–¢–µ—Ö. –û–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ', 'HYPERPC SERVICE PREMIUM', 15500)`,

  // –¢–æ–≤–∞—Ä—ã
  `INSERT INTO —Ç–æ–≤–∞—Ä—ã (–Ω–æ–º–µ—Ä_—Ç–æ–≤–∞—Ä–∞, –≤–∏–¥_—Ç–æ–≤–∞—Ä–∞, –Ω–∞–∑–≤–∞–Ω–∏–µ_—Ç–æ–≤–∞—Ä–∞, —Å—Ç–æ–∏–º–æ—Å—Ç—å_—Ç–æ–≤–∞—Ä–∞) VALUES
  (1423, '–í–æ–¥—è–Ω–æ–µ –æ—Ö–ª–∞–∂–¥–µ–Ω–∏–µ', '–í–æ–¥—è–Ω–æ–µ –æ—Ö–ª–∞–∂–µ–Ω–∏–µ HYPERPC X22G', 38999),
  (1271, '–ú–æ–Ω–∏—Ç–æ—Ä', 'ASUS X322Z', 6800),
  (1520, '–ú–æ–Ω–∏—Ç–æ—Ä', 'ASUS X218LITE', 37600),
  (12290, '–í–∏–¥–µ–æ–∫–∞—Ä—Ç–∞', 'ASUS GeForce RTX 5090', 580200),
  (17010, '–ü—Ä–æ—Ü–µ—Å—Å–æ—Ä', 'Ryzen 9 9950X3D', 88800)`,

  // –ó–∞–∫–∞–∑—ã
  `INSERT INTO –∑–∞–∫–∞–∑—ã (–Ω–æ–º–µ—Ä_–∑–∞–∫–∞–∑–∞, id_–∫–ª–∏–µ–Ω—Ç–∞, –≤–∏–¥_–∑–∞–∫–∞–∑–∞, –Ω–æ–º–µ—Ä_–∫–æ–º–ø—å—é—Ç–µ—Ä–∞, –Ω–æ–º–µ—Ä_—É—Å–ª—É–≥–∏, –Ω–æ–º–µ—Ä_—Ç–æ–≤–∞—Ä–∞, —Å—Ç–æ–∏–º–æ—Å—Ç—å_–∑–∞–∫–∞–∑–∞, —Ç–∏–ø_–æ–ø–ª–∞—Ç—ã, –¥–∞—Ç–∞_–∑–∞–∫–∞–∑–∞) VALUES 
  (11101, 101, '–¢–æ–≤–∞—Ä', NULL, NULL, 1423, 38999, '–ü—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏', '17.09.2025'),
  (11102, 102, '–ö–æ–º–ø—å—é—Ç–µ—Ä', 57900, NULL, NULL, 142400, '–ö–∞—Ä—Ç–∞', '18.09.2025'),
  (11103, 103, '–ö–æ–º–ø—å—é—Ç–µ—Ä, —Ç–æ–≤–∞—Ä', 51580, NULL, 1271, 1654700, '–ö–∞—Ä—Ç–∞', '15.09.2025'),
  (11104, 104, '–ö–æ–º–ø—å—é—Ç–µ—Ä, —É—Å–ª—É–≥–∏, —Ç–æ–≤–∞—Ä', 56220, 3018, 1520, 354200, '–ü—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏', '16.09.2025'),
  (11105, 105, '–£—Å–ª—É–≥–∏', NULL, 3125, NULL, 11500, '–ü—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏', '18.09.2025')`
];

// –í—ã–ø–æ–ª–Ω—è–µ–º SQL –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ
function executeSQL(queries, index = 0) {
  if (index >= queries.length) {
    console.log('‚úÖ –í—Å–µ —Ç–∞–±–ª–∏—Ü—ã —Å–æ–∑–¥–∞–Ω—ã —É—Å–ø–µ—à–Ω–æ!');
    checkData();
    return;
  }

  db.run(queries[index], function(err) {
    if (err) {
      console.error(`‚ùå –û—à–∏–±–∫–∞ –≤ –∑–∞–ø—Ä–æ—Å–µ ${index + 1}:`, err.message);
      console.log('–ó–∞–ø—Ä–æ—Å:', queries[index]);
    } else {
      console.log(`‚úì –í—ã–ø–æ–ª–Ω–µ–Ω –∑–∞–ø—Ä–æ—Å ${index + 1}/${queries.length}`);
      executeSQL(queries, index + 1);
    }
  });
}

// –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–∞–Ω–Ω—ã–µ
function checkData() {
  console.log('\nüìä –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–æ–∑–¥–∞–Ω–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã...');
  
  const tables = ['–∫–ª–∏–µ–Ω—Ç—ã', '—Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∏', '–∫–æ–º–ø—å—é—Ç–µ—Ä', '—É—Å–ª—É–≥–∏', '—Ç–æ–≤–∞—Ä—ã', '–∑–∞–∫–∞–∑—ã'];
  let checked = 0;
  
  tables.forEach(table => {
    db.get(`SELECT COUNT(*) as count FROM ${table}`, (err, row) => {
      if (err) {
        console.log(`‚ùå ${table}: –æ—à–∏–±–∫–∞ - ${err.message}`);
      } else {
        console.log(`‚úÖ ${table}: ${row.count} –∑–∞–ø–∏—Å–µ–π`);
      }
      checked++;
      if (checked === tables.length) {
        console.log('\nüéâ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!');
        db.close();
      }
    });
  });
}

// –ó–∞–ø—É—Å–∫–∞–µ–º –ø—Ä–æ—Ü–µ—Å—Å
console.log('üöÄ –ù–∞—á–∏–Ω–∞–µ–º —Å–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö...');
executeSQL([...tablesSQL, ...insertSQL]);